#include "sine_table.h"
#include "gpio.h"

short sineTable[TABLE_LEN] = 
{
//0,4,9,13,18,22,26,31,35,39,43,48,52,56,60,64,68,72,75,79,83,86,90,93,96,99,102,105,108,111,114,116,119,121,123,125,127,129,130,132,133,135,136,137,138,138,139,139,140,140,140,140,140,139,139,138,137,136,135,134,133,131,130,128,126,124,122,120,117,115,112,110,107,104,101,98,95,91,88,84,81,77,73,70,66,62,58,54,50,46,41,37,33,29,24,20,15,11,7,2,-2,-7,-11,-15,-20,-24,-29,-33,-37,-41,-46,-50,-54,-58,-62,-66,-70,-73,-77,-81,-84,-88,-91,-95,-98,-101,-104,-107,-110,-112,-115,-117,-120,-122,-124,-126,-128,-130,-131,-133,-134,-135,-136,-137,-138,-139,-139,-140,-140,-140,-140,-140,-139,-139,-138,-138,-137,-136,-135,-133,-132,-130,-129,-127,-125,-123,-121,-119,-116,-114,-111,-108,-105,-102,-99,-96,-93,-90,-86,-83,-79,-75,-72,-68,-64,-60,-56,-52,-48,-43,-39,-35,-31,-26,-22,-18,-13,-9,-4,0,
// 136,136,136,136,136,136,136,136,136,136,136,136,136,134,132,128,124,118,112,105,90,81,71,61,52,41,31,21,10,0,0,0,0,0,0,0,0,0,0,0,0,9,19,29,40,50,59,69,79,88,97,105,113,119,124,128,132,135,136,136,136,136,136,136,136,136,136,136,136,136,136,136,136,134,131,128,123,118,111,104,89,80,70,61,51,41,31,21,10,0,0,0,0,0,0,0,0,0,0,0,0,11,21,32,42,52,62,71,81,90,99,107,115,121,126,130,133,136,136,136,
0,0,0,0,0,0,0,0,0,0,0,10,21,31,41,51,61,71,80,90,99,107,114,120,125,130,133,136,138,139,138,138,138,138,138,138,138,138,138,138,139,138,137,135,133,129,125,120,114,106,92,82,73,63,53,43,33,23,13,0,0,0,0,0,0,0,0,0,0,0,0,11,21,31,42,52,62,71,81,90,99,108,115,121,126,130,133,136,138,139,138,138,138,138,138,138,138,137,137,137,137,137,136,134,131,127,123,118,111,104,89,80,71,61,51,41,31,21,10,0,
};
//
//short sineTable[200] = 
//{
//0,4,8,12,17,21,25,29,33,37,41,45,49,52,56,60,64,67,71,74,77,81,84,87,90,93,96,99,101,104,107,109,111,113,115,117,119,121,122,124,125,126,127,128,129,130,130,131,131,131,131,131,131,131,130,129,129,128,127,126,124,123,122,120,118,116,114,112,110,108,105,103,100,97,95,92,89,86,82,79,76,72,69,65,62,58,54,50,47,43,39,35,31,27,23,19,14,10,6,2,-2,-6,-10,-14,-19,-23,-27,-31,-35,-39,-43,-47,-50,-54,-58,-62,-65,-69,-72,-76,-79,-82,-86,-89,-92,-95,-97,-100,-103,-105,-108,-110,-112,-114,-116,-118,-120,-122,-123,-124,-126,-127,-128,-129,-129,-130,-131,-131,-131,-131,-131,-131,-131,-130,-130,-129,-128,-127,-126,-125,-124,-122,-121,-119,-117,-115,-113,-111,-109,-107,-104,-101,-99,-96,-93,-90,-87,-84,-81,-77,-74,-71,-67,-64,-60,-56,-52,-49,-45,-41,-37,-33,-29,-25,-21,-17,-12,-8,-4,0,
//};


short DtTable[200]=
{
0,11,23,34,45,57,68,79,90,101,112,123,133,144,154,164,174,184,194,203,213,222,230,239,247,256,263,271,278,285,292,299,305,311,316,322,327,331,336,339,343,346,349,352,354,356,357,359,359,360,360,360,359,358,357,355,353,351,348,345,341,338,333,329,324,319,314,308,302,296,289,282,275,267,260,252,243,235,226,217,208,199,189,179,169,159,149,138,128,117,106,95,84,73,62,51,40,28,17,6,-6,-17,-28,-40,-51,-62,-73,-84,-95,-106,-117,-128,-138,-149,-159,-169,-179,-189,-199,-208,-217,-226,-235,-243,-252,-260,-267,-275,-282,-289,-296,-302,-308,-314,-319,-324,-329,-333,-338,-341,-345,-348,-351,-353,-355,-357,-358,-359,-360,-360,-360,-359,-359,-357,-356,-354,-352,-349,-346,-343,-339,-336,-331,-327,-322,-316,-311,-305,-299,-292,-285,-278,-271,-263,-256,-247,-239,-230,-222,-213,-203,-194,-184,-174,-164,-154,-144,-133,-123,-112,-101,-90,-79,-68,-57,-45,-34,-23,-11,0,
};

short K11Table[TABLE_LEN] = 
{
//0,-145,-290,-435,-580,-725,-871,-1018,-1165,-1312,-1461,-1610,-1760,-1910,-2062,-2215,-2370,-2525,-2682,-2841,-3001,-3163,-3327,-3492,-3660,-3829,-4000,-4173,-4349,-4526,-4704,-4885,-5066,-5249,-5432,-5615,-5797,-5977,-6155,-6328,-6497,-6657,-6809,-6949,-7076,-7188,-7281,-7355,-7407,-7436,-7442,-7424,-7383,-7320,-7237,-7134,-7015,-6881,-6734,-6578,-6413,-6242,-6067,-5887,-5706,-5523,-5340,-5157,-4975,-4794,-4615,-4437,-4261,-4087,-3914,-3744,-3576,-3409,-3245,-3082,-2921,-2762,-2604,-2447,-2292,-2139,-1986,-1835,-1684,-1535,-1386,-1238,-1091,-945,-798,-653,-507,-362,-217,-72,72,217,362,507,653,798,945,1091,1238,1386,1535,1684,1835,1986,2139,2292,2447,2604,2762,2921,3082,3245,3409,3576,3744,3914,4087,4261,4437,4615,4794,4975,5157,5340,5523,5706,5887,6067,6242,6413,6578,6734,6881,7015,7134,7237,7320,7383,7424,7442,7436,7407,7355,7281,7188,7076,6949,6809,6657,6497,6328,6155,5977,5797,5615,5432,5249,5066,4885,4704,4526,4349,4173,4000,3829,3660,3492,3327,3163,3001,2841,2682,2525,2370,2215,2062,1910,1760,1610,1461,1312,1165,1018,871,725,580,435,290,145,0,
// -3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3520,-3376,-3205,-3013,-2804,-2582,-2347,-1935,-1698,-1471,-1251,-1036,-825,-617,-410,-205,0,0,0,0,0,0,0,0,0,0,0,0,-181,-379,-581,-787,-995,-1207,-1425,-1649,-1882,-2127,-2371,-2604,-2824,-3031,-3222,-3391,-3533,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3614,-3503,-3356,-3183,-2990,-2781,-2559,-2325,-1916,-1681,-1455,-1236,-1022,-813,-607,-403,-201,0,0,0,0,0,0,0,0,0,0,0,0,-212,-418,-624,-831,-1041,-1256,-1475,-1702,-1938,-2186,-2434,-2670,-2894,-3104,-3297,-3467,-3608,-3614,-3614,
 0,0,0,0,0,0,0,0,0,0,0,-203,-406,-610,-817,-1027,-1241,-1460,-1686,-1922,-2170,-2418,-2654,-2878,-3089,-3283,-3455,-3599,-3706,-3770,-3721,-3724,-3728,-3731,-3735,-3739,-3744,-3749,-3754,-3760,-3767,-3750,-3685,-3578,-3435,-3264,-3070,-2860,-2636,-2399,-1979,-1741,-1513,-1293,-1078,-867,-659,-454,-248,0,0,0,0,0,0,0,0,0,0,0,0,-207,-413,-620,-829,-1041,-1256,-1477,-1705,-1941,-2190,-2439,-2676,-2900,-3110,-3303,-3472,-3612,-3715,-3773,-3718,-3715,-3713,-3710,-3708,-3706,-3704,-3702,-3701,-3699,-3697,-3673,-3603,-3493,-3350,-3180,-2989,-2782,-2561,-2328,-1919,-1684,-1458,-1240,-1026,-817,-610,-406,-202,0,

};


short K22Table[TABLE_LEN] = 
{
//0,91,183,274,366,458,550,642,735,828,921,1015,1110,1205,1301,1397,1495,1593,1692,1792,1893,1995,2098,2202,2308,2415,2523,2632,2743,2854,2967,3081,3195,3310,3426,3541,3656,3770,3882,3991,4097,4199,4294,4383,4463,4533,4592,4638,4671,4690,4693,4682,4657,4617,4564,4499,4424,4339,4247,4148,4045,3937,3826,3713,3599,3483,3368,3253,3138,3024,2910,2798,2687,2577,2469,2361,2255,2150,2046,1944,1842,1742,1642,1543,1446,1349,1253,1157,1062,968,874,781,688,596,504,412,320,228,137,46,-46,-137,-228,-320,-412,-504,-596,-688,-781,-874,-968,-1062,-1157,-1253,-1349,-1446,-1543,-1642,-1742,-1842,-1944,-2046,-2150,-2255,-2361,-2469,-2577,-2687,-2798,-2910,-3024,-3138,-3253,-3368,-3483,-3599,-3713,-3826,-3937,-4045,-4148,-4247,-4339,-4424,-4499,-4564,-4617,-4657,-4682,-4693,-4690,-4671,-4638,-4592,-4533,-4463,-4383,-4294,-4199,-4097,-3991,-3882,-3770,-3656,-3541,-3426,-3310,-3195,-3081,-2967,-2854,-2743,-2632,-2523,-2415,-2308,-2202,-2098,-1995,-1893,-1792,-1692,-1593,-1495,-1397,-1301,-1205,-1110,-1015,-921,-828,-735,-642,-550,-458,-366,-274,-183,-91,0,
 0,0,0,0,0,0,0,0,0,0,0,292,584,879,1176,1478,1786,2102,2427,2766,3123,3480,3819,4142,4445,4725,4973,5180,5334,5426,5356,5360,5365,5370,5376,5382,5389,5396,5404,5412,5422,5397,5304,5150,4944,4697,4419,4116,3794,3453,2848,2506,2178,1860,1551,1248,949,653,357,0,0,0,0,0,0,0,0,0,0,0,0,297,594,893,1193,1498,1808,2126,2453,2794,3152,3511,3851,4174,4476,4754,4998,5199,5347,5430,5351,5347,5344,5340,5337,5334,5331,5329,5326,5324,5322,5286,5186,5028,4822,4577,4302,4004,3686,3351,2762,2424,2099,1784,1477,1175,878,584,291,0,
//5202,5202,5202,5202,5202,5202,5202,5202,5202,5202,5202,5202,5202,5066,4859,4613,4337,4036,3716,3379,2785,2444,2117,1800,1491,1187,888,591,295,0,0,0,0,0,0,0,0,0,0,0,0,261,546,837,1132,1432,1737,2051,2374,2709,3061,3413,3747,4065,4363,4637,4881,5085,5202,5202,5202,5202,5202,5202,5202,5202,5202,5202,5202,5202,5202,5202,5202,5041,4830,4581,4303,4002,3683,3346,2757,2419,2094,1779,1472,1171,874,581,290,0,0,0,0,0,0,0,0,0,0,0,0,306,602,898,1196,1499,1807,2123,2449,2789,3146,3503,3843,4165,4467,4745,4990,5193,5202,5202,

};

float currScale = 1.0f; 
uint8_t sync = 0;
  